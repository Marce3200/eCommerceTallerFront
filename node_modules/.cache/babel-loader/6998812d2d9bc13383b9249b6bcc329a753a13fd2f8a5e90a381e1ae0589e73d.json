{"ast":null,"code":"var _jsxFileName = \"/Users/marcelaquezada/workspace/eCommerce frontend/src/services/AuthProvider.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext({\n  //creo contexto useContext\n  auth: null,\n  setAuth: () => {},\n  user: null,\n  setUser: () => {}\n});\nexport const useAuth = () => {\n  _s();\n  return useContext(AuthContext);\n};\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nconst AuthProvider = _ref => {\n  _s2();\n  let {\n    children\n  } = _ref;\n  //uso contexto\n  const [auth, setAuth] = useState(null); //indica si esta autenticado\n  const [user, setUser] = useState(null);\n  useEffect(() => {\n    const isAuth = async () => {\n      const baseURL = process.env.REACT_APP_API_URL;\n      try {\n        const axiosConfig = {\n          headers: {\n            authorization: \"Bearer \" + localStorage.getItem(\"token\")\n          },\n          withCredentials: true\n        };\n        const res = await axios.get(`${baseURL}/user/logged-user`, axiosConfig);\n        setUser(res.data.u);\n        setAuth(true);\n      } catch (error) {\n        setUser(null);\n      }\n      ;\n    };\n    isAuth();\n  }, [auth]);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      auth,\n      setAuth,\n      user,\n      setUser\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\n_s2(AuthProvider, \"ZPtF2R0Jp4+N/QlkYGxexwratkw=\");\n_c = AuthProvider;\nexport default AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useContext","useEffect","useState","axios","AuthContext","auth","setAuth","user","setUser","useAuth","AuthProvider","children","isAuth","baseURL","process","env","REACT_APP_API_URL","axiosConfig","headers","authorization","localStorage","getItem","withCredentials","res","get","data","u","error"],"sources":["/Users/marcelaquezada/workspace/eCommerce frontend/src/services/AuthProvider.js"],"sourcesContent":["import { createContext, useContext, useEffect, useState } from 'react';\nimport axios from 'axios';\n\n\nconst AuthContext = createContext({//creo contexto useContext\n  auth: null,\n  setAuth: () => {},\n  user: null,\n  setUser:() =>{}\n});\n\nexport const useAuth = () => useContext(AuthContext);\n\nconst AuthProvider = ({ children }) => {//uso contexto\n  const [auth, setAuth] = useState(null);//indica si esta autenticado\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    const isAuth = async () => {\n        const baseURL = process.env.REACT_APP_API_URL\n     \n      try {\n        const axiosConfig ={\n            headers:{\n                authorization:\"Bearer \"+ localStorage.getItem(\"token\")\n            }, withCredentials: true,\n\n        }\n        const res = await axios.get(\n            `${baseURL}/user/logged-user`,\n          axiosConfig\n        );\n     \n        setUser(res.data.u);\n        setAuth(true)\n      } catch(error) {\n        setUser(null);\n      };\n    };\n\n    isAuth();\n  }, [auth]);\n\n  return (\n    <AuthContext.Provider value={{ auth, setAuth, user, setUser}}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport default AuthProvider;"],"mappings":";;;AAAA,SAASA,aAAa,EAAEC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACtE,OAAOC,KAAK,MAAM,OAAO;AAAC;AAG1B,MAAMC,WAAW,gBAAGL,aAAa,CAAC;EAAC;EACjCM,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE,MAAM,CAAC,CAAC;EACjBC,IAAI,EAAE,IAAI;EACVC,OAAO,EAAC,MAAK,CAAC;AAChB,CAAC,CAAC;AAEF,OAAO,MAAMC,OAAO,GAAG;EAAA;EAAA,OAAMT,UAAU,CAACI,WAAW,CAAC;AAAA;AAAC,GAAxCK,OAAO;AAEpB,MAAMC,YAAY,GAAG,QAAkB;EAAA;EAAA,IAAjB;IAAEC;EAAS,CAAC;EAAM;EACtC,MAAM,CAACN,IAAI,EAAEC,OAAO,CAAC,GAAGJ,QAAQ,CAAC,IAAI,CAAC,CAAC;EACvC,MAAM,CAACK,IAAI,EAAEC,OAAO,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EAEtCD,SAAS,CAAC,MAAM;IACd,MAAMW,MAAM,GAAG,YAAY;MACvB,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB;MAE/C,IAAI;QACF,MAAMC,WAAW,GAAE;UACfC,OAAO,EAAC;YACJC,aAAa,EAAC,SAAS,GAAEC,YAAY,CAACC,OAAO,CAAC,OAAO;UACzD,CAAC;UAAEC,eAAe,EAAE;QAExB,CAAC;QACD,MAAMC,GAAG,GAAG,MAAMpB,KAAK,CAACqB,GAAG,CACtB,GAAEX,OAAQ,mBAAkB,EAC/BI,WAAW,CACZ;QAEDT,OAAO,CAACe,GAAG,CAACE,IAAI,CAACC,CAAC,CAAC;QACnBpB,OAAO,CAAC,IAAI,CAAC;MACf,CAAC,CAAC,OAAMqB,KAAK,EAAE;QACbnB,OAAO,CAAC,IAAI,CAAC;MACf;MAAC;IACH,CAAC;IAEDI,MAAM,EAAE;EACV,CAAC,EAAE,CAACP,IAAI,CAAC,CAAC;EAEV,oBACE,QAAC,WAAW,CAAC,QAAQ;IAAC,KAAK,EAAE;MAAEA,IAAI;MAAEC,OAAO;MAAEC,IAAI;MAAEC;IAAO,CAAE;IAAA,UAC1DG;EAAQ;IAAA;IAAA;IAAA;EAAA,QACY;AAE3B,CAAC;AAAC,IAnCID,YAAY;AAAA,KAAZA,YAAY;AAqClB,eAAeA,YAAY;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}